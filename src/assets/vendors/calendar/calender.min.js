!function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '—'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>‹</span>",next:"<span class='fc-text-arrow'>›</span>",prevYear:"<span class='fc-text-arrow'>«</span>",nextYear:"<span class='fc-text-arrow'>»</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>›</span>",next:"<span class='fc-text-arrow'>‹</span>",prevYear:"<span class='fc-text-arrow'>»</span>",nextYear:"<span class='fc-text-arrow'>«</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=t.fullCalendar={version:"1.6.4"},o=a.views={};function i(e){t.extend(!0,n,e)}function s(n,r,i){var s=this;s.options=r,s.render=function(e){v?W()&&(B(),P(e)):function(){r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");r.theme&&n.addClass("ui-widget");v=t("<div class='fc-content' style='position:relative'/>").prependTo(n),f=new l(s,r),(d=f.render())&&n.prepend(d);L(r.defaultView),r.handleWindowResize&&t(window).resize(I);A()||z()}()},s.destroy=function(){h&&(K("viewDestroy",h,h,h.element),h.triggerEventDestroy());t(window).unbind("resize",I),f.destroy(),v.remove(),n.removeClass("fc fc-rtl ui-widget")},s.refetchEvents=function(){U(),Z()},s.reportEvents=function(t){N=t,V()},s.reportEventChange=function(t){q(t)},s.rerenderEvents=q,s.changeView=L,s.select=function(t,n,r){h.select(t,n,r===e||r)},s.unselect=G,s.prev=function(){_(-1)},s.next=function(){_(1)},s.prevYear=function(){g(R,-1),_()},s.nextYear=function(){g(R,1),_()},s.today=function(){R=new Date,_()},s.gotoDate=function(t,e,n){t instanceof Date?R=b(t):E(R,t,e,n);_()},s.incrementDate=function(t,n,r){t!==e&&g(R,t);n!==e&&p(R,n);r!==e&&m(R,r);_()},s.formatDate=function(t,e){return k(t,e,r)},s.formatDates=function(t,e,n){return H(t,e,n,r)},s.getDate=function(){return b(R)},s.getView=function(){return h},s.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,Y())},s.trigger=K,function(n,r){var o=this;o.isFetchNeeded=function(t,e){return!i||t<i||e>s},o.fetchEvents=function(t,e){i=t,s=e,y=[];var n=++g,r=h.length;p=r;for(var a=0;a<r;a++)D(h[a],n)},o.addEventSource=function(t){(t=C(t))&&(p++,D(t,g))},o.removeEventSource=function(e){h=t.grep(h,function(t){return!x(t,e)}),y=t.grep(y,function(t){return!x(t.source,e)}),d(y)},o.updateEvent=function(t){var e,n,r=y.length,a=f().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,T(n));T(t),d(y)},o.renderEvent=function(t,e){T(t),t.source||(e&&(v.events.push(t),t.source=v),y.push(t));d(y)},o.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}y=t.grep(y,e,!0);for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=t.grep(h[r].events,e,!0))}else{y=[];for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=[])}d(y)},o.clientEvents=function(e){if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,function(t){return t._id==e});return y},o.normalizeEvent=T;for(var i,s,l=o.trigger,f=o.getView,d=o.reportEvents,v={events:[]},h=[v],g=0,p=0,m=0,y=[],w=0;w<r.length;w++)C(r[w]);function D(e,r){!function e(r,o){var l;var u=a.sourceFetchers;var f;for(l=0;l<u.length;l++){if(!0===(f=u[l](r,i,s,o)))return;if("object"==typeof f)return void e(f,o)}var d=r.events;if(d)t.isFunction(d)?(M(),d(b(i),b(s),function(t){o(t),E()})):t.isArray(d)?o(d):o();else{var v=r.url;if(v){var h,g=r.success,p=r.error,m=r.complete;h=t.isFunction(r.data)?r.data():r.data;var y=t.extend({},h||{}),w=J(r.startParam,n.startParam),D=J(r.endParam,n.endParam);w&&(y[w]=Math.round(+i/1e3)),D&&(y[D]=Math.round(+s/1e3)),M(),t.ajax(t.extend({},c,r,{data:y,success:function(e){e=e||[];var n=X(g,this,arguments);t.isArray(n)&&(e=n),o(e)},error:function(){X(p,this,arguments),o()},complete:function(){X(m,this,arguments),E()}}))}else o()}}(e,function(a){if(r==g){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;o<a.length;o++)a[o].source=e,T(a[o]);y=y.concat(a)}--p||d(y)}})}function C(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=a.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),h.push(e),e}function M(){m++||l("loading",null,!0,f())}function E(){--m||l("loading",null,!1,f())}function T(t){var r=t.source||{},a=J(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+u++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=b(t.start=S(t.start,a)),t.end=S(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?b(t.end):null,t.allDay===e&&(t.allDay=J(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function x(t,e){return t&&e&&k(t)==k(e)}function k(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(s,r,i);var f,d,v,h,y,w,D,C=s.isFetchNeeded,M=s.fetchEvents,T=n[0],x=0,F=0,R=new Date,N=[];function z(){setTimeout(function(){!h.start&&A()&&_()},0)}function W(){return n.is(":visible")}function A(){return t("body").is(":visible")}function L(e){h&&e==h.name||function(e){F++,h&&(K("viewDestroy",h,h,h.element),G(),h.triggerEventDestroy(),$(),h.element.remove(),f.deactivateButton(h.name));f.activateButton(e),h=new o[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(v),s),_(),Q(),F--}(e)}function _(t){(!h.start||t||R<h.start||R>=h.end)&&W()&&P(t)}function P(t){var e;F++,h.start&&(K("viewDestroy",h,h,h.element),G(),U()),$(),h.render(R,t||0),j(),Q(),(h.afterRender||function(){})(),f.updateTitle(h.title),(e=new Date)>=h.start&&e<h.end?f.disableButton("today"):f.enableButton("today"),K("viewRender",h,h,h.element),h.trigger("viewDisplay",T),F--,!r.lazyFetching||C(h.visStart,h.visEnd)?Z():V()}function Y(){W()&&(G(),U(),B(),j(),V())}function B(){w=r.contentHeight?r.contentHeight:r.height?r.height-(d?d.height():0)-O(v):Math.round(v.width()/Math.max(r.aspectRatio,.5))}function j(){w===e&&B(),F++,h.setHeight(w),h.setWidth(v.width()),F--,y=n.outerWidth()}function I(){if(!F)if(h.start){var t=++x;setTimeout(function(){t==x&&!F&&W()&&y!=(y=n.outerWidth())&&(F++,Y(),h.trigger("windowResize",T),F--)},200)}else z()}function q(t){U(),V(t)}function V(t){W()&&(h.setEventData(N),h.renderEvents(N,t),h.trigger("eventAfterAllRender"))}function U(){h.triggerEventDestroy(),h.clearEvents(),h.clearEventData()}function Z(){M(h.visStart,h.visEnd)}function G(){h&&h.unselect()}function $(){v.css({width:"100%",height:v.height(),overflow:"hidden"})}function Q(){v.css({width:"",height:"",overflow:""})}function K(t,e){if(r[t])return r[t].apply(e||T,Array.prototype.slice.call(arguments,2))}E(R,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(D=a,h.dragStart(D,e,n))}}).bind("dragstop",function(t,e){D&&(h.dragStop(D,t,e),D=null)})}function l(e,n){var r=this;r.render=function(){if(a=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},r.destroy=function(){i.remove()},r.updateTitle=function(t){i.find("h2").html(t)},r.activateButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-active")},r.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-active")},r.disableButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-disabled")},r.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-disabled")};var a,i=t([]);function s(r){var i=t("<td class='fc-header-"+r+"'/>"),s=n.header[r];return s&&t.each(s.split(" "),function(r){var s;r>0&&i.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(r,l){var c;if("title"==l)i.append("<span class='fc-header-title'><h2> </h2></span>"),s&&s.addClass(a+"-corner-right"),s=null;else if(e[l]?c=e[l]:o[l]&&(c=function(){d.removeClass(a+"-state-hover"),e.changeView(l)}),c){var u=n.theme?Y(n.buttonIcons,l):null,f=Y(n.buttonText,l),d=t("<span class='fc-button fc-button-"+l+" "+a+"-state-default'>"+(u?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+u+"'/></span>":f)+"</span>").click(function(){d.hasClass(a+"-state-disabled")||c()}).mousedown(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){d.removeClass(a+"-state-down")}).hover(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){d.removeClass(a+"-state-hover").removeClass(a+"-state-down")}).appendTo(i);j(d),s||d.addClass(a+"-corner-left"),s=d}}),s&&s.addClass(a+"-corner-right")}),i}}t.fn.fullCalendar=function(a){if("string"==typeof a){var o,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[a])){var r=n[a].apply(n,i);o===e&&(o=r),"destroy"==a&&t.removeData(this,"fullCalendar")}}),o!==e?o:this}var l=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(l.push(a.events),delete a.events),a=t.extend(!0,{},n,a.isRTL||a.isRTL===e&&n.isRTL?r:{},a),this.each(function(e,n){var r=t(n),o=new s(r,a,l);r.data("fullCalendar",o),o.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var c={dataType:"json",cache:!1},u=1;a.addDays=m,a.cloneDate=b,a.parseDate=S,a.parseISO8601=T,a.parseTime=x,a.formatDate=k,a.formatDates=H;var f=["sun","mon","tue","wed","thu","fri","sat"],d=864e5,v=36e5,h=6e4;function g(t,e,n){return t.setFullYear(t.getFullYear()+e),n||D(t),t}function p(t,e,n){if(+t){var r=t.getMonth()+e,a=b(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||D(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function m(t,e,n){if(+t){var r=t.getDate()+e,a=b(t);a.setHours(9),a.setDate(r),t.setDate(r),n||D(t),y(t,a)}return t}function y(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*v)}function w(t,e){return t.setMinutes(t.getMinutes()+e),t}function D(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function b(t,e){return e?D(new Date(+t)):new Date(+t)}function C(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function M(t,e){return Math.round((b(t,!0)-b(e,!0))/d)}function E(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function S(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),T(t,n)||(t?new Date(t):null)):null}function T(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),y(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),y(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function x(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function k(t,e,n){return H(t,null,e,n)}function H(t,e,r,a){a=a||n;var o,i,s,l,c=t,u=e,f=r.length,d="";for(o=0;o<f;o++)if("'"==(i=r.charAt(o))){for(s=o+1;s<f;s++)if("'"==r.charAt(s)){c&&(d+=s==o+1?"'":r.substring(o+1,s),o=s);break}}else if("("==i){for(s=o+1;s<f;s++)if(")"==r.charAt(s)){var v=k(c,r.substring(o+1,s),a);parseInt(v.replace(/\D/,""),10)&&(d+=v),o=s;break}}else if("["==i){for(s=o+1;s<f;s++)if("]"==r.charAt(s)){var h=r.substring(o+1,s);(v=k(c,h,a))!=k(u,h,a)&&(d+=v),o=s;break}}else if("{"==i)c=e,u=t;else if("}"==i)c=t,u=e;else{for(s=f;s>o;s--)if(l=F[r.substring(o,s)]){c&&(d+=l(c,a)),o=s-1;break}s==o&&c&&(d+=i)}return d}var F={s:function(t){return t.getSeconds()},ss:function(t){return P(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return P(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return P(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return P(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return P(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return P(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return k(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return(n=new Date(t.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1;var e,n}};function R(t){return t.end?(e=t.end,n=t.allDay,e=b(e),n||e.getHours()||e.getMinutes()?m(e,1):D(e)):m(b(t.start),1);var e,n}function N(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function z(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-A(a,r)))}function W(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-O(a,r)))}function A(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}(e):0)}function O(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}(e):0)}function L(t,e){return t-e}function _(t){return Math.max.apply(Math,t)}function P(t){return(t<10?"0":"")+t}function Y(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function B(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/'/g,"'").replace(/"/g,'"').replace(/\n/g,"<br />")}function j(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function I(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function q(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function X(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function J(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function V(e,n,r){var a=this;a.renderBasic=function(n,r,p){C=n,M=r,E=p,F=L("theme")?"ui":"fc",R=L("columnFormat"),N=L("weekNumbers"),W=L("weekNumberTitle"),A="iso"!=L("weekNumberCalculation")?"w":"W",l||(g=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e));!function(){var n="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=F+"-widget-header",r="";for(r+="<thead><tr>",N&&(r+="<th class='fc-week-number "+n+"'>"+B(W)+"</th>"),t=0;t<M;t++)e=X(0,t),r+="<th class='fc-day-header fc-"+f[e.getDay()]+" "+n+"'>"+B(U(e,R))+"</th>";return r+="</tr></thead>"}()+function(){var t,e,n,r=F+"-widget-content",a="";for(a+="<tbody>",t=0;t<C;t++){for(a+="<tr class='fc-week'>",N&&(n=X(t,0),a+="<td class='fc-week-number "+r+"'><div>"+B(U(n,A))+"</div></td>"),e=0;e<M;e++)n=X(t,e),a+=Z(n);a+="</tr>"}return a+="</tbody>"}()+"</table>";o&&o.remove();o=t(n).appendTo(e),i=o.find("thead"),s=i.find(".fc-day-header"),l=o.find("tbody"),c=l.find("tr"),u=l.find(".fc-day"),d=c.find("td:first-child"),v=c.eq(0).find(".fc-day > div"),h=c.eq(0).find(".fc-day-content > div"),I(i.add(i.find("tr"))),I(c),c.eq(0).addClass("fc-first"),c.filter(":last").addClass("fc-last"),u.each(function(e,n){var r=X(Math.floor(e/M),e%M);_("dayRender",a,r,t(n))}),G(u)}()},a.setHeight=function(e){var n,r,a,o=e-i.height();"variable"==L("weekMode")?n=r=Math.floor(o/(1==C?2:6)):(n=Math.floor(o/C),r=o-n*(C-1));d.each(function(e,o){e<C&&(a=t(o)).find("> div").css("min-height",(e==C-1?r:n)-O(a))})},a.setWidth=function(t){p=t,k.clear(),H.clear(),w=0,N&&(w=i.find("th.fc-week-number").outerWidth());y=Math.floor((p-w)/M),z(s.slice(0,-1),y)},a.renderDayOverlay=Q,a.defaultSelectionEnd=function(t,e){return b(t)},a.renderSelection=function(t,e,n){Q(t,m(b(e),1),!0)},a.clearSelection=function(){Y()},a.reportDayClick=function(t,e,n){var r=J(t),a=u[r.row*M+r.col];_("dayClick",a,t,e,n)},a.dragStart=function(t,e,n){x.start(function(t){Y(),t&&K(t.row,t.col,t.row,t.col)},e)},a.dragStop=function(t,e,n){var r=x.stop();if(Y(),r){var a=X(r);_("drop",t,a,!0,e,n)}},a.defaultEventEnd=function(t){return b(t.start)},a.getHoverListener=function(){return x},a.colLeft=function(t){return k.left(t)},a.colRight=function(t){return k.right(t)},a.colContentLeft=function(t){return H.left(t)},a.colContentRight=function(t){return H.right(t)},a.getIsCellAllDay=function(){return!0},a.allDayRow=function(t){return c.eq(t)},a.getRowCnt=function(){return C},a.getColCnt=function(){return M},a.getColWidth=function(){return y},a.getDaySegmentContainer=function(){return g},et.call(a,e,n,r),st.call(a),it.call(a),function(){var t=this;t.renderEvents=function(e,n){t.renderDayEvents(e,n)},t.clearEvents=function(){t.getDaySegmentContainer().empty()},nt.call(t)}.call(a);var o,i,s,l,c,u,d,v,h,g,p,y,w,C,M,E,S,x,k,H,F,R,N,W,A,L=a.opt,_=a.trigger,P=a.renderOverlay,Y=a.clearOverlays,q=a.daySelectionMousedown,X=a.cellToDate,J=a.dateToCell,V=a.rangeToSegments,U=n.formatDate;function Z(t){var e=F+"-widget-content",n=a.start.getMonth(),r=D(new Date),o="",i=["fc-day","fc-"+f[t.getDay()],e];return t.getMonth()!=n&&i.push("fc-other-month"),+t==+r?i.push("fc-today",F+"-state-highlight"):t<r?i.push("fc-past"):i.push("fc-future"),o+="<td class='"+i.join(" ")+"' data-date='"+U(t,"yyyy-MM-dd")+"'><div>",E&&(o+="<div class='fc-day-number'>"+t.getDate()+"</div>"),o+="<div class='fc-day-content'><div style='position:relative'> </div></div></div></td>"}function G(t){t.click($).mousedown(q)}function $(e){if(!L("selectable")){var n=T(t(this).data("date"));_("dayClick",this,n,!0,e)}}function Q(t,e,n){n&&S.build();for(var r=V(t,e),a=0;a<r.length;a++){var o=r[a];G(K(o.row,o.leftCol,o.row,o.rightCol))}}function K(t,n,r,a){var o=S.rect(t,n,r,a,e);return P(o,e)}j(e.addClass("fc-grid")),S=new lt(function(e,n){var r,a,o;s.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),c.each(function(n,i){n<C&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),x=new ct(S),k=new ut(function(t){return v.eq(t)}),H=new ut(function(t){return h.eq(t)})}function U(n,r,a){var o=this;o.renderAgenda=function(e){K=e,vt=bt("theme")?"ui":"fc",ht=bt("isRTL"),gt=x(bt("minTime")),pt=x(bt("maxTime")),mt=bt("columnFormat"),yt=bt("weekNumbers"),wt=bt("weekNumberTitle"),Dt="iso"!=bt("weekNumberCalculation")?"w":"W",G=bt("snapMinutes")||bt("slotMinutes"),i?Wt():function(){var e,r,a,o,i,s=vt+"-widget-header",l=vt+"-widget-content",c=bt("slotMinutes")%15==0;Wt(),y=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),bt("allDaySlot")?(E=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+bt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'> </th></tr></table>",S=t(e).appendTo(y),At((T=S.find("tr")).find("td")),y.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):E=t([]);for(k=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(y),H=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(k),F=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(H),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=C(),o=w(b(r),pt),w(r,gt),rt=0,a=0;r<o;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(c&&i?" ":Nt(r,bt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'> </div></td></tr>",w(r,bt("slotMinutes")),rt++;Ot((_=t(e+="</tbody></table>").appendTo(H)).find("td"))}()},o.setWidth=function(e){e,ft.clear(),dt.clear();var n=s.find("th:first");S&&(n=n.add(S.find("th:first")));n=n.add(_.find("th:first")),X=0,z(n.width("").each(function(e,n){X=Math.max(X,t(n).outerWidth())}),X);var r=i.find(".fc-agenda-gutter");S&&(r=r.add(S.find("th.fc-agenda-gutter")));var a=k[0].clientWidth;(V=k.width()-a)?(z(r,V),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last");J=Math.floor((a-X)/K),z(l.slice(0,-1),J)},o.setHeight=function(t){t===e&&(t=Y);Y=t,zt={};var n=c.position().top,r=k.position().top,a=Math.min(t-n,_.height()+r+1);p.height(a-O(g)),y.css("top",n),k.height(a-r-1),U=_.find("tr:first").height()+1,$=bt("slotMinutes")/G,Q=U/$},o.afterRender=function(){!function(){var t=C(),e=b(t);e.setHours(bt("firstHour"));var n=It(t,e)+1;function r(){k.scrollTop(n)}r(),setTimeout(r,0)}()},o.defaultEventEnd=function(t){var e=b(t.start);if(t.allDay)return e;return w(e,bt("defaultEventMinutes"))},o.timePosition=It,o.getIsCellAllDay=Bt,o.allDayRow=function(t){return T},o.getCoordinateGrid=function(){return at},o.getHoverListener=function(){return ot},o.colLeft=function(t){return ft.left(t)},o.colRight=function(t){return ft.right(t)},o.colContentLeft=function(t){return dt.left(t)},o.colContentRight=function(t){return dt.right(t)},o.getDaySegmentContainer=function(){return E},o.getSlotSegmentContainer=function(){return F},o.getMinMinute=function(){return gt},o.getMaxMinute=function(){return pt},o.getSlotContainer=function(){return H},o.getRowCnt=function(){return 1},o.getColCnt=function(){return K},o.getColWidth=function(){return J},o.getSnapHeight=function(){return Q},o.getSnapMinutes=function(){return G},o.defaultSelectionEnd=function(t,e){if(e)return b(t);return w(b(t),bt("slotMinutes"))},o.renderDayOverlay=_t,o.renderSelection=function(t,e,n){n?bt("allDaySlot")&&_t(t,m(b(e),1),!0):qt(t,e)},o.clearSelection=Xt,o.reportDayClick=Vt,o.dragStart=function(t,e,n){ot.start(function(t){if(Et(),t)if(Bt(t))Pt(t.row,t.col,t.row,t.col);else{var e=jt(t),n=w(b(e),bt("defaultEventMinutes"));Yt(e,n)}},e)},o.dragStop=function(t,e,n){var r=ot.stop();Et(),r&&Ct("drop",t,jt(r),Bt(r),e,n)},et.call(o,n,r,a),st.call(o),it.call(o),function(){var n=this;n.renderEvents=function(n,o){var i,s=n.length,l=[],u=[];for(i=0;i<s;i++)n[i].allDay?l.push(n[i]):u.push(n[i]);r("allDaySlot")&&(I(l,o),c());!function(n,o){var i,s,l,c,u,d,v,h,g,m,y,w,b,M,E,S,T=n.length,x="",k=f(),H=r("isRTL");for(i=0;i<T;i++)s=n[i],l=s.event,c=p(s.start,s.start),u=p(s.start,s.end),d=D(s.col),v=C(s.col),g=(h=(v-=.025*(h=v-d))-d)*(s.forwardCoord-s.backwardCoord),r("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),H?(y=v-s.backwardCoord*h,m=y-g):(m=d+s.backwardCoord*h,y=m+g),m=Math.max(m,d),y=Math.min(y,v),g=y-m,s.top=c,s.left=m,s.outerWidth=g,s.outerHeight=u-c,x+=$(l,s);for(k[0].innerHTML=x,w=k.children(),i=0;i<T;i++)s=n[i],l=s.event,b=t(w[i]),!1===(M=a("eventRender",l,l,b))?b.remove():(M&&!0!==M&&(b.remove(),b=t(M).css({position:"absolute",top:s.top,left:s.left}).appendTo(k)),s.element=b,l._id===o?Q(l,b,s):b[0]._fci=i,F(l,b));for(N(k,n,Q),i=0;i<T;i++)s=n[i],(b=s.element)&&(s.vsides=O(b,!0),s.hsides=A(b,!0),(E=b.find(".fc-event-title")).length&&(s.contentTop=E[0].offsetTop));for(i=0;i<T;i++)s=n[i],(b=s.element)&&(b[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",S=Math.max(0,s.outerHeight-s.vsides),b[0].style.height=S+"px",l=s.event,s.contentTop!==e&&S-s.contentTop<10&&(b.find("div.fc-event-time").text(J(l.start,r("timeFormat"))+" - "+l.title),b.find("div.fc-event-title").remove()),a("eventAfterRender",l,l,b))}(function(e){var n,r,a,o,i,s=S(),l=g(),c=v(),u=t.map(e,G),f=[];for(r=0;r<s;r++)for(w(n=E(0,r),l),i=Z(i=U(e,u,n,w(b(n),c-l))),a=0;a<i.length;a++)(o=i[a]).col=r,f.push(o);return f}(u),o)},n.clearEvents=function(){u().empty(),f().empty()},n.slotSegHtml=$,nt.call(n);var r=n.opt,a=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,s=n.eventEnd,l=n.eventElementHandlers,c=n.setHeight,u=n.getDaySegmentContainer,f=n.getSlotSegmentContainer,d=n.getHoverListener,v=n.getMaxMinute,g=n.getMinMinute,p=n.timePosition,y=n.getIsCellAllDay,D=n.colContentLeft,C=n.colContentRight,E=n.cellToDate,S=n.getColCnt,T=n.getColWidth,x=n.getSnapHeight,k=n.getSnapMinutes,H=n.getSlotContainer,F=n.reportEventElement,z=n.showEvents,L=n.hideEvents,_=n.eventDrop,P=n.eventResize,Y=n.renderDayOverlay,j=n.clearOverlays,I=n.renderDayEvents,X=n.calendar,J=X.formatDate,V=X.formatDates;function U(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],v=t.length;for(a=0;a<v;a++)o=t[a],i=o.start,(s=e[a])>n&&i<r&&(i<n?(l=b(n),u=!1):(l=i,u=!0),s>r?(c=b(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(tt)}function G(t){return t.end?b(t.end):w(b(t.start),r("defaultEventMinutes"))}function $(t,e){var n="<",a=t.url,s=q(t,r),l=["fc-event","fc-event-vert"];return o(t)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(t.className),t.source&&(l=l.concat(t.source.className||[])),n+=a?"a href='"+B(t.url)+"'":"div",n+=" class='"+l.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+s+"'><div class='fc-event-inner'><div class='fc-event-time'>"+B(V(t.start,t.end,r("timeFormat")))+"</div><div class='fc-event-title'>"+B(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&i(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function Q(t,e,c){var u=e.find("div.fc-event-time");o(t)&&function(t,e,o){var i,s,l,c,u,f,d,v,h,g,p,D=n.getCoordinateGrid(),C=S(),H=T(),F=x(),N=k();function W(){j(),l&&(u?(o.hide(),e.draggable("option","grid",null),Y(m(b(t.start),h),m(R(t),h))):(!function(e){var n,a=w(b(t.start),e);t.end&&(n=w(b(t.end),e));o.text(V(a,n,r("timeFormat")))}(g),o.css("display",""),e.draggable("option","grid",[H,F])))}e.draggable({scroll:!1,grid:[H,F],axis:1==C&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(n,r){a("eventDragStart",e,t,n,r),L(t,e),D.build(),i=e.position(),s=D.cell(n.pageX,n.pageY),l=c=!0,u=f=y(s),d=v=0,h=0,g=p=0},drag:function(t,n){var r=D.cell(t.pageX,t.pageY);if(l=!!r){if(u=y(r),(d=Math.round((n.position.left-i.left)/H))!=v){var a=E(0,s.col),o=s.col+d;o=Math.max(0,o),o=Math.min(C-1,o);var m=E(0,o);h=M(m,a)}u||(g=Math.round((n.position.top-i.top)/F)*N)}l==c&&u==f&&d==v&&g==p||(W(),c=l,f=u,v=d,p=g),e.draggable("option","revert",!l)},stop:function(n,r){j(),a("eventDragStop",e,t,n,r),l&&(u||h||g)?_(this,t,h,u?0:g,u,n,r):(l=!0,u=!1,d=0,h=0,g=0,W(),e.css("filter",""),e.css(i),z(t,e))}})}(t,e,u),c.isEnd&&i(t)&&function(t,e,n){var o,i,l=x(),c=k();e.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(n,r){o=i=0,L(t,e),a("eventResizeStart",this,t,n,r)},resize:function(a,u){(o=Math.round((Math.max(l,e.height())-u.originalSize.height)/l))!=i&&(n.text(V(t.start,o||t.end?w(s(t),c*o):null,r("timeFormat"))),i=o)},stop:function(n,r){a("eventResizeStop",this,t,n,r),o?P(this,t,0,c*o,n,r):z(t,e)}})}(t,e,u),l(t,e)}n.draggableDayEvent=function(t,e,n){var o,i,s,l=n.isStart,c=!0,u=d(),f=T(),v=x(),p=k(),y=g();function w(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}e.draggable({opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(n,d){a("eventDragStart",e,t,n,d),L(t,e),o=e.width(),u.start(function(n,a){if(j(),n){i=!1;var o=E(0,a.col),u=E(0,n.col);s=M(u,o),n.row?l?c&&(e.width(f-10),W(e,v*Math.round((t.end?(t.end-t.start)/h:r("defaultEventMinutes"))/p)),e.draggable("option","grid",[f,1]),c=!1):i=!0:(Y(m(b(t.start),s),m(R(t),s)),w()),i=i||c&&!s}else w(),i=!0;e.draggable("option","revert",i)},n,"drag")},stop:function(n,r){if(u.stop(),j(),a("eventDragStop",e,t,n,r),i)w(),e.css("filter",""),z(t,e);else{var o=0;c||(o=Math.round((e.offset().top-H().offset().top)/v)*p+y-(60*t.start.getHours()+t.start.getMinutes())),_(this,t,s,o,c,n,r)}}})}}.call(o);var i,s,l,c,u,d,v,g,p,y,E,S,T,k,H,F,_,P,Y,X,J,V,U,G,$,Q,K,rt,at,ot,ft,dt,vt,ht,gt,pt,mt,yt,wt,Dt,bt=o.opt,Ct=o.trigger,Mt=o.renderOverlay,Et=o.clearOverlays,St=o.reportSelection,Tt=o.unselect,xt=o.daySelectionMousedown,kt=o.slotSegHtml,Ht=o.cellToDate,Ft=o.dateToCell,Rt=o.rangeToSegments,Nt=r.formatDate,zt={};function Wt(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=vt+"-widget-header",a="";for(a+="<thead><tr>",yt?(t=Ht(0,0),e=Nt(t,Dt),ht?e+=wt:e=wt+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+B(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'> </th>",n=0;n<K;n++)t=Ht(0,n),a+="<th class='fc-"+f[t.getDay()]+" fc-col"+n+" "+r+"'>"+B(Nt(t,mt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'> </th></tr></thead>"}()+function(){var t,e,n,r,a,o=vt+"-widget-header",i=vt+"-widget-content",s=D(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'> </th>",n="",e=0;e<K;e++)t=Ht(0,e),a=["fc-col"+e,"fc-"+f[t.getDay()],i],+t==+s?a.push(vt+"-state-highlight","fc-today"):t<s?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'> </div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'> </td></tr></tbody>"}()+"</table>";i&&i.remove(),i=t(e).appendTo(n),s=i.find("thead"),l=s.find("th").slice(1,-1),c=i.find("tbody"),u=c.find("td").slice(0,-1),d=u.find("> div"),v=u.find(".fc-day-content > div"),g=u.eq(0),p=d.eq(0),I(s.add(s.find("tr"))),I(c.add(c.find("tr")))}function At(t){t.click(Lt).mousedown(xt)}function Ot(t){t.click(Lt).mousedown(Jt)}function Lt(t){if(!bt("selectable")){var e=Math.min(K-1,Math.floor((t.pageX-i.offset().left-X)/J)),n=Ht(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*bt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+gt),Ct("dayClick",u[e],n,!1,t)}else Ct("dayClick",u[e],n,!0,t)}}function _t(t,e,n){n&&at.build();for(var r=Rt(t,e),a=0;a<r.length;a++){var o=r[a];At(Pt(o.row,o.leftCol,o.row,o.rightCol))}}function Pt(t,e,n,r){var a=at.rect(t,e,n,r,y);return Mt(a,y)}function Yt(t,e){for(var n=0;n<K;n++){var r=Ht(0,n),a=m(b(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=at.rect(0,n,0,n,H),l=It(r,o),c=It(r,i);s.top=l,s.height=c-l,Ot(Mt(s,H))}}}function Bt(t){return bt("allDaySlot")&&!t.row}function jt(t){var e=Ht(0,t.col),n=t.row;return bt("allDaySlot")&&n--,n>=0&&w(e,gt+n*G),e}function It(t,n){if(t=b(t,!0),n<w(b(t),gt))return 0;if(n>=w(b(t),pt))return _.height();var r=bt("slotMinutes"),a=60*n.getHours()+n.getMinutes()-gt,o=Math.floor(a/r),i=zt[o];return i===e&&(i=zt[o]=_.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+U*(a%r/r)))}function qt(e,n){var r=bt("selectHelper");if(at.build(),r){var a=Ft(e).col;if(a>=0&&a<K){var o=at.rect(0,a,0,a,H),i=It(e,e),s=It(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",P=t(l).css(o).appendTo(H))}else o.isStart=!0,o.isEnd=!0,(P=t(kt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",bt("dragOpacity"));P&&(Ot(P),H.append(P),z(P,o.width,!0),W(P,o.height,!0))}}}else Yt(e,n)}function Xt(){Et(),P&&(P.remove(),P=null)}function Jt(e){var n;1==e.which&&bt("selectable")&&(Tt(e),ot.start(function(t,e){if(Xt(),t&&t.col==e.col&&!Bt(t)){var r=jt(e),a=jt(t);qt((n=[r,w(b(r),G),a,w(b(a),G)].sort(L))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){ot.stop(),n&&(+n[0]==+n[1]&&Vt(n[0],!1,t),St(n[0],n[3],!1,t))}))}function Vt(t,e,n){Ct("dayClick",u[Ft(t).col],t,e,n)}j(n.addClass("fc-agenda")),at=new lt(function(e,n){var r,a,o;l.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),bt("allDaySlot")&&(a=(r=T).offset().top,e[0]=[a,a+r.outerHeight()]);var i=H.offset().top,s=k.offset().top,c=s+k.outerHeight();function u(t){return Math.max(s,Math.min(c,t))}for(var f=0;f<rt*$;f++)e.push([u(i+Q*f),u(i+Q*(f+1))])}),ot=new ct(at),ft=new ut(function(t){return d.eq(t)}),dt=new ut(function(t){return v.eq(t)})}function Z(t){var e,n=function(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&Q(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),r=n[0];if(function(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)Q(a,t[o],a.forwardSegs)}(n),r){for(e=0;e<r.length;e++)G(r[e]);for(e=0;e<r.length;e++)$(r[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(n)}function G(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;n<a.length;n++)G(r=a[n]),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function $(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(K),$(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;a<o.length;a++)$(o[a],0,t.forwardCoord)}function Q(t,e,n){n=n||[];for(var r=0;r<e.length;r++)a=t,o=e[r],a.end>o.start&&a.start<o.end&&n.push(e[r]);var a,o;return n}function K(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||tt(t,e)}function tt(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function et(n,r,a){var o=this;o.element=n,o.calendar=r,o.name=a,o.opt=v,o.trigger=h,o.isEventDraggable=function(t){var e=t.source||{};return J(t.startEditable,e.startEditable,v("eventStartEditable"),t.editable,e.editable,v("editable"))&&!v("disableDragging")},o.isEventResizable=function(t){var e=t.source||{};return J(t.durationEditable,e.durationEditable,v("eventDurationEditable"),t.editable,e.editable,v("editable"))&&!v("disableResizing")},o.setEventData=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},o.clearEventData=function(){c={},u={},f=[]},o.eventEnd=g,o.reportEventElement=function(t,e){f.push({event:t,element:e}),u[t._id]?u[t._id].push(e):u[t._id]=[e]},o.triggerEventDestroy=function(){t.each(f,function(t,e){o.trigger("eventDestroy",e.event,e.event,e.element)})},o.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return h("eventClick",this,t,n)}).hover(function(e){h("eventMouseover",this,t,e)},function(e){h("eventMouseout",this,t,e)})},o.showEvents=function(t,e){p(t,e,"show")},o.hideEvents=function(t,e){p(t,e,"hide")},o.eventDrop=function(t,e,n,r,a,o,i){var s=e.allDay,u=e._id;y(c[u],n,r,a),h("eventDrop",t,e,n,r,a,function(){y(c[u],-n,-r,s),l(u)},o,i),l(u)},o.eventResize=function(t,e,n,r,a,o){var i=e._id;D(c[i],n,r),h("eventResize",t,e,n,r,function(){D(c[i],-n,-r),l(i)},a,o),l(i)};var i=o.defaultEventEnd,s=r.normalizeEvent,l=r.reportEventChange,c={},u={},f=[],d=r.options;function v(e,n){var r=d[e];return t.isPlainObject(r)?Y(r,n||a):r}function h(t,e){return r.trigger.apply(r,[t,e||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function g(t){return t.end?b(t.end):i(t)}function p(t,e,n){var r,a=u[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function y(t,n,r,a){r=r||0;for(var o,i=t.length,l=0;l<i;l++)o=t[l],a!==e&&(o.allDay=a),w(m(o.start,n,!0),r),o.end&&(o.end=w(m(o.end,n,!0),r)),s(o,d)}function D(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=w(m(g(r),e,!0),n),s(r,d)}o.isHiddenDay=function(t){"object"==typeof t&&(t=t.getDay());return S[t]},o.skipHiddenDays=function(t,e,n){e=e||1;for(;S[(t.getDay()+(n?e:0)+7)%7];)m(t,e)},o.getCellsPerWeek=function(){return C},o.dateToCell=function(t){return W(z(N(t)))},o.dateToDayOffset=N,o.dayOffsetToCellOffset=z,o.cellOffsetToCell=W,o.cellToDate=function(){return R(F(H.apply(null,arguments)))},o.cellToCellOffset=H,o.cellOffsetToDayOffset=F,o.dayOffsetToDate=R,o.rangeToSegments=function(t,e){for(var n=o.getRowCnt(),r=o.getColCnt(),a=[],i=N(t),s=N(e),l=z(i),c=z(s)-1,u=0;u<n;u++){var f=u*r,d=f+r-1,v=Math.max(l,f),h=Math.min(c,d);if(v<=h){var g=W(v),p=W(h),m=[g.col,p.col].sort(),y=F(v)==i,w=F(h)+1==s;a.push({row:u,leftCol:m[0],rightCol:m[1],isStart:y,isEnd:w})}}return a};var C,E=v("hiddenDays")||[],S=[],T=[],x=[],k=v("isRTL");function H(t,e){var n=o.getColCnt(),r=k?-1:1,a=k?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function F(t){var e=o.visStart.getDay();return t+=T[e],7*Math.floor(t/C)+x[(t%C+C)%C]-e}function R(t){var e=b(o.visStart);return m(e,t),e}function N(t){return M(t,o.visStart)}function z(t){var e=o.visStart.getDay();return t+=e,Math.floor(t/7)*C+T[(t%7+7)%7]-T[e]}function W(t){var e=o.getColCnt(),n=k?-1:1,r=k?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}!function(){!1===v("weekends")&&E.push(0,6);for(var e=0,n=0;e<7;e++)T[e]=n,S[e]=-1!=t.inArray(e,E),S[e]||(x[n]=e,n++);if(!(C=n))throw"invalid hiddenDays"}()}function nt(){var e=this;e.renderDayEvents=function(t,e){var n=P(t,!1,!0);at(n,function(t,e){s(t.event,e)}),function(t,e){var n=C();at(t,function(t,n,r){var a=t.event;a._id===e?J(a,n,t):n[0]._fci=r}),N(n,t,J)}(n,e),at(n,function(t,e){r("eventAfterRender",t.event,t.event,e)})},e.draggableDayEvent=function(t,e){var a,o=k();e.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,i){r("eventDragStart",e,t,n,i),u(t,e),o.start(function(n,r,o,i){if(e.draggable("option","revert",!n||!o&&!i),T(),n){var s=F(r),l=F(n);a=M(l,s),S(m(b(t.start),a),m(R(t),a))}else a=0},n,"drag")},stop:function(n,i){o.stop(),T(),r("eventDragStop",e,t,n,i),a?f(this,t,a,0,t.allDay,n,i):(e.css("filter",""),c(t,e))}})},e.resizableDayEvent=function(e,a,o){var s=n("isRTL")?"w":"e",l=a.find(".ui-resizable-"+s),f=!1;j(a),a.mousedown(function(t){t.preventDefault()}).click(function(t){f&&(t.preventDefault(),t.stopImmediatePropagation())}),l.mousedown(function(n){if(1==n.which){f=!0;var l,g,p=k(),y=(v(),h(),a.css("top")),w=t.extend({},e),D=L(O(e.start));x(),t("body").css("cursor",s+"-resize").one("mouseup",function(n){r("eventResizeStop",this,e,n),t("body").css("cursor",""),p.stop(),T(),l&&d(this,e,l,0,n);setTimeout(function(){f=!1},0)}),r("eventResizeStart",this,e,n),p.start(function(n,r){if(n){var a=z(r),f=z(n);if(f=Math.max(f,D),l=W(f)-W(a)){w.end=m(i(e),l,!0);var d=g;g=function(t,e,n){var r=P([t],!0,!1),a=[];return at(r,function(t,r){t.row===e&&r.css("top",n),a.push(r[0])}),a}(w,o.row,y),(g=t(g)).find("*").css("cursor",s+"-resize"),d&&d.remove(),u(e)}else g&&(c(e),g.remove(),g=null);T(),S(e.start,m(R(e),l))}},n)}})};var n=e.opt,r=e.trigger,a=e.isEventDraggable,o=e.isEventResizable,i=e.eventEnd,s=e.reportEventElement,l=e.eventElementHandlers,c=e.showEvents,u=e.hideEvents,f=e.eventDrop,d=e.eventResize,v=e.getRowCnt,h=e.getColCnt,g=(e.getColWidth,e.allDayRow),p=e.colLeft,y=e.colRight,w=e.colContentLeft,D=e.colContentRight,C=(e.dateToCell,e.getDaySegmentContainer),E=e.calendar.formatDates,S=e.renderDayOverlay,T=e.clearOverlays,x=e.clearSelection,k=e.getHoverListener,H=e.rangeToSegments,F=e.cellToDate,z=e.cellToCellOffset,W=e.cellOffsetToDayOffset,O=e.dateToDayOffset,L=e.dayOffsetToCellOffset;function P(e,a,o){var i,s,l=C(),c=a?t("<div/>"):l,u=function(t){for(var e=[],n=0;n<t.length;n++){var r=Y(t[n]);e.push.apply(e,r)}return e}(e);return function(t){for(var e=n("isRTL"),r=0;r<t.length;r++){var a=t[r],o=(e?a.isEnd:a.isStart)?w:p,i=(e?a.isStart:a.isEnd)?D:y,s=o(a.leftCol),l=i(a.rightCol);a.left=s,a.outerWidth=l-s}}(u),i=function(t){for(var e="",n=0;n<t.length;n++)e+=I(t[n]);return e}(u),c[0].innerHTML=i,s=c.children(),a&&l.append(s),function(e,n){for(var a=0;a<e.length;a++){var o=e[a],i=o.event,s=n.eq(a),l=r("eventRender",i,i,s);!1===l?s.remove():(l&&!0!==l&&(l=t(l).css({position:"absolute",left:o.left}),s.replaceWith(l),s=l),o.element=s)}}(u,s),at(u,function(t,e){t.hsides=A(e,!0)}),at(u,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),at(u,function(t,e){t.outerHeight=e.outerHeight(!0)}),function(t,e){var n=function(t){for(var e=v(),n=h(),r=[],a=function(t){var e,n,r,a=v(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=X(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=_(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(_(s))}return r}(t),r=function(){var t,e=v(),n=[];for(t=0;t<e;t++)n[t]=g(t).find("div.fc-day-content > div");return n}(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);at(t,function(t,e){e.css("top",a[t.row]+t.top)})}(u,o),u}function Y(t){for(var e=t.start,n=R(t),r=H(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function I(t){var e="",r=n("isRTL"),i=t.event,s=i.url,l=["fc-event","fc-event-hori"];a(i)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(i.className),i.source&&(l=l.concat(i.source.className||[]));var c=q(i,n);return e+=s?"<a href='"+B(s)+"'":"<div",e+=" class='"+l.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+c+"'><div class='fc-event-inner'>",!i.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+B(E(i.start,i.end,n("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+B(i.title||"")+"</span></div>",t.isEnd&&o(i)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(r?"w":"e")+"'>   </div>"),e+="</"+(s?"a":"div")+">"}function X(t){for(var e=[],n=function(t){t.sort(ot);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&rt(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function J(t,n,r){a(t)&&e.draggableDayEvent(t,n,r),r.isEnd&&o(t)&&e.resizableDayEvent(t,n,r),l(t,n)}}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function at(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ot(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function it(){var e=this;e.select=function(t,e,n){l(),e||(e=a(t,n));o(t,e,n),c(t,e,n)},e.unselect=l,e.reportSelection=c,e.daySelectionMousedown=function(r){var a=e.cellToDate,s=e.getIsCellAllDay,u=e.getHoverListener(),f=e.reportDayClick;if(1==r.which&&n("selectable")){l(r);var d;u.start(function(t,e){i(),t&&s(t)?(d=[a(e),a(t)].sort(L),o(d[0],d[1],!0)):d=null},r),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),c(d[0],d[1],!0,t))})}};var n=e.opt,r=e.trigger,a=e.defaultSelectionEnd,o=e.renderSelection,i=e.clearSelection,s=!1;function l(t){s&&(s=!1,i(),r("unselect",null,t))}function c(t,e,n,a){s=!0,r("select",null,t,e,n,a)}n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(e){var r=n("unselectCancel");r&&t(e.target).parents(r).length||l(e)})}function st(){this.renderOverlay=function(r,a){var o=n.shift();o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=a[0]&&o.appendTo(a);return e.push(o.css(r).show()),o},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function lt(t){var e,n,r=this;r.build=function(){t(e=[],n=[])},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function ct(n){var r,a,o,i;function s(t){var r;(r=t).pageX===e&&(r.pageX=r.originalEvent.pageX,r.pageY=r.originalEvent.pageY);var s=n.cell(t.pageX,t.pageY);(!s!=!i||s&&(s.row!=i.row||s.col!=i.col))&&(s?(o||(o=s),a(s,o,s.row-o.row,s.col-o.col)):a(s,o),i=s)}this.start=function(e,l,c){a=e,o=i=null,n.build(),s(l),r=c||"mousemove",t(document).bind(r,s)},this.stop=function(){return t(document).unbind(r,s),i}}function ut(t){var n=this,r={},a={},o={};function i(e){return r[e]=r[e]||t(e)}n.left=function(t){return a[t]=a[t]===e?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===e?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}a.dateFormatters=F,a.applyAll=X,o.month=function(t,e){var n=this;n.render=function(t,e){e&&(p(t,e),t.setDate(1));var l=r("firstDay"),c=b(t,!0);c.setDate(1);var u=p(b(c),1),f=b(c);m(f,-(f.getDay()-l+7)%7),o(f);var d=b(u);m(d,(7-d.getDay()+l)%7),o(d,-1,!0);var v=i(),h=Math.round(M(d,f)/7);"fixed"==r("weekMode")&&(m(d,7*(6-h)),h=6);n.title=s(c,r("titleFormat")),n.start=c,n.end=u,n.visStart=f,n.visEnd=d,a(h,v,!0)},V.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDate},o.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&m(t,7*e);var l=m(b(t),-(t.getDay()-r("firstDay")+7)%7),c=m(b(l),7),u=b(l);o(u);var f=b(c);o(f,-1,!0);var d=i();n.start=l,n.end=c,n.visStart=u,n.visEnd=f,n.title=s(u,m(b(f),-1),r("titleFormat")),a(1,d,!1)},V.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&m(t,e);o(t,e<0?-1:1);var s=b(t,!0),l=m(b(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1,1,!1)},V.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=e.formatDate},i({weekMode:"fixed"}),o.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&m(t,7*e);var l=m(b(t),-(t.getDay()-r("firstDay")+7)%7),c=m(b(l),7),u=b(l);o(u);var f=b(c);o(f,-1,!0);var d=i();n.title=s(u,m(b(f),-1),r("titleFormat")),n.start=l,n.end=c,n.visStart=u,n.visEnd=f,a(d)},U.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&m(t,e);o(t,e<0?-1:1);var s=b(t,!0),l=m(b(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1)},U.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=e.formatDate},i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);